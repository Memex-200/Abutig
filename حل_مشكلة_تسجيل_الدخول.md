# حل مشكلة تسجيل الدخول للموظفين

## المشكلة

المستخدم `asmaa@gmail.com` يحاول تسجيل الدخول لكن يظهر خطأ "لم يتم العثور على المستخدم أو كلمة المرور غير صحيحة"

## السبب

الادمن أنشأ المستخدم في جدول `users` فقط، لكن لم ينشئ حساب المصادقة في Supabase Auth.

## الحل

### الخطوة 1: إنشاء المستخدمين في قاعدة البيانات

شغل هذا السكريبت في Supabase SQL Editor:

```sql
-- Copy and paste the contents of supabase/create_test_users_with_auth.sql
```

### الخطوة 2: إنشاء حسابات المصادقة يدوياً

اذهب إلى Supabase Dashboard → Authentication → Users → Add User

#### للمستخدم أسماء:

- **Email:** asmaa@gmail.com
- **Password:** 123456
- **User Metadata:**

```json
{
  "full_name": "أسماء أحمد",
  "role": "EMPLOYEE"
}
```

#### للمستخدم كريم:

- **Email:** karem@gmail.com
- **Password:** 123456
- **User Metadata:**

```json
{
  "full_name": "كريم سيد",
  "role": "EMPLOYEE"
}
```

### الخطوة 3: ربط الحسابات (اختياري)

بعد إنشاء حسابات المصادقة، شغل هذا لربطها:

```sql
-- ربط حساب أسماء
UPDATE public.users
SET auth_user_id = (SELECT id FROM auth.users WHERE email = 'asmaa@gmail.com')
WHERE email = 'asmaa@gmail.com' AND auth_user_id IS NULL;

-- ربط حساب كريم
UPDATE public.users
SET auth_user_id = (SELECT id FROM auth.users WHERE email = 'karem@gmail.com')
WHERE email = 'karem@gmail.com' AND auth_user_id IS NULL;
```

### الخطوة 4: اختبار تسجيل الدخول

جرب تسجيل الدخول الآن بـ:

- **Email:** asmaa@gmail.com
- **Password:** 123456

## ملاحظات مهمة

- يجب إنشاء المستخدم في كلا المكانين: جدول `users` و Supabase Auth
- كلمة المرور يجب أن تكون متطابقة في كلا المكانين
- بعد إنشاء حساب المصادقة، سيعمل تسجيل الدخول بشكل صحيح
